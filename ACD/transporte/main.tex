\documentclass[13pt,a4paper]{article}
\usepackage[spanish,es-nodecimaldot]{babel}	% Utilizar español
\usepackage[utf8]{inputenc}					% Caracteres UTF-8
\usepackage{graphicx}						% Imagenes
\usepackage[hidelinks]{hyperref}			% Poner enlaces sin marcarlos en rojo
\usepackage{fancyhdr}						% Modificar encabezados y pies de pagina
\usepackage{float}							% Insertar figuras
\usepackage[textwidth=390pt]{geometry}		% Anchura de la pagina
\usepackage[nottoc]{tocbibind}				% Referencias (no incluir num pagina indice en Indice)
\usepackage{enumitem}						% Permitir enumerate con distintos simbolos
\usepackage[T1]{fontenc}					% Usar textsc en sections
\usepackage{amsmath}						% Símbolos matemáticos
\usepackage[ruled,vlined]{algorithm2e}      % Pseudocódigo
\usepackage{xcolor}
\usepackage{listings}
% Para que acepten tíldes los listing
\lstset{     
     literate=%
         {á}{{\'a}}1
         {é}{{\'e}}1
         {í}{{\'i}}1
         {ó}{{\'o}}1
         {ú}{{\'u}}1
         {Á}{{\'A}}1
         {É}{{\'E}}1
         {Í}{{\'I}}1
         {Ó}{{\'O}}1 
         {Ú}{{\'U}}1
         {ñ}{{\~n}}1 
         {Ñ}{{\~N}}1 
         {¿}{{?``}}1 
         {¡}{{!``}}1
}
\usepackage{dsfont}

% ==============================================================================

\usepackage{caption, subcaption}
\usepackage[section]{placeins}
\makeatletter
\def\fps@figure{H}
\makeatother

\usepackage{booktabs}
\usepackage{longtable}
\usepackage{array}
\usepackage{multirow}
\usepackage{wrapfig}
\usepackage{colortbl}
\usepackage{pdflscape}
\usepackage{tabu}
\usepackage{threeparttable}
\usepackage{threeparttablex}
\usepackage[normalem]{ulem}
\usepackage{makecell}
\usepackage{xcolor}
\usepackage[bottom]{footmisc}

\makeatletter
\newcommand*{\centerfloat}{%
  \parindent \z@
  \leftskip \z@ \@plus 1fil \@minus \textwidth
  \rightskip\leftskip
  \parfillskip \z@skip}
\makeatother

% ==============================================================================
% ==============================================================================

% Comando para poner el nombre de la asignatura
\newcommand{\asignatura}{Aplicaciones de Ciencia de Datos y Tecnologías Inteligentes}
\newcommand{\autor}{Ignacio Vellido Expósito}
\newcommand{\email}{ignaciove@correo.ugr.es}
\newcommand{\titulo}{Técnicas de Soft Computing}
\newcommand{\subtitulo}{Sistema inteligente de localización de aseos}

% Configuración de encabezados y pies de pagina
\pagestyle{fancy}
\lhead{\autor{}}
\rhead{\asignatura{}}
\lfoot{Máster Ciencia de Datos e Ingeniería de Computadores}
\cfoot{}
\rfoot{\thepage}
\renewcommand{\headrulewidth}{0.4pt}		% Linea cabeza de pagina
\renewcommand{\footrulewidth}{0.4pt}		% Linea pie de pagina

% ==============================================================================
% ==============================================================================

\begin{document}
    \pagenumbering{gobble}
    \input{portada/portada}
    
    % \pagenumbering{arabic}
    % \tableofcontents
    % \thispagestyle{empty}				% No usar estilo en la pagina de indice

    % \newpage

    % ==============================================================================

    % \input{secciones/resultados} \newpage

% ¿A quíen no le ha dado alguna vez un apretón en la calle? Bueno, no hay forma de evitar que eso ocurra, pero podemos ayudar a hacer el problema más ameno

% Vaguedad en los datos
% Propuesta, solo documentación

% ---------------------------

\section{Introducción}

A todos alguna vez nos han dado la necesidad de ir al baño estando en la calle, y a nadie le gusta ir a un aseo poco higiénico.
Esto además se vuelve un problema serio cuando viajamos de turismo o simplemente cuando nos encontramos en una zona poco conocida. Dada la urgencia de la situación, deámbular sin rumbo es algo que nadie desearía, y más si la persona cuenta con problemas intestinales o de próstata.

\vspace{\baselineskip}

% Nadie es extraño a dolores de tripa espontáneos, ya sea cuando estamos de turismo/paseo...
% A nadie le resulta extraño...
% Público objetivo: Personas con problemas intestinales, turistas, gente que trabaja en la calle (taxistas)

% Es necesaria la colaboración extrema y constante de los usuarios para crear la comunidad. Los principios de la app serán difíciles

% En los momentos de necesidad uno no se quiere preocuparse de detalles y solo quiere encontrar el lugar que mejor cumpla su función.
% La aplicación, haciendo uso de una base de datos de aseos (públicos, restaurantes, centros comerciales, museos, etc.), encontrará 

De cara a ayudar en la búsqueda de estos lugares de alivio, en las siguientes páginas se propone una aplicación móvil basada en técnicas de soft computing que, a partir de la ubicación, encuentra el baño cercano óptimo siguiendo los criterios de preferencia del usuario.

\section{Descripción del sistema}

\begin{figure}[H]
  \centerfloat
  \includegraphics[width=0.99\textwidth]{img/0.png}
  \caption{Representación global del sistema inteligente.}
\end{figure}

Dividimos el núcleo de procesamiento en tres partes:
\begin{enumerate}
  \item \textbf{Subsistema de entrada}: Solicitará y procesará la información tanto cualitativa como cuantitativa.
  \item \textbf{Subsistema central}: Calculará y optimizará las rutas más viables maximizando las preferencias del usuario.
  \item \textbf{Subsistema de salida}: Devolverá las rutas e información de los aseos de manera amigable al usuario, volviendo a representaciones cualitativas cuando sea apropiado.
\end{enumerate}

\subsection{Subsistema de entrada}

Los valores de entrada al sistema son los siguientes:
\begin{itemize}
  \item \textbf{Ubicación}: Mediante el geo-localizador del móvil se obtendrá una representación en coordenadas de la posición del usuario.
  \item \textbf{Urgencia}: Se podrá elegir entre diferentes etiquetas lingüísticas (inmediato, pronto, más adelante). 
  % Para la transformación en valores numéricos se obtendría por un lado el rango de distancia aceptado y un indicador de urgencia, siguiendo la función de pertenencia de la figura \ref{urgencia}.
\end{itemize}

\newpage

Junto a un conjunto de parámetros opcionales para limitar y ajustar las preferencias del usuario:
\begin{itemize}
  \item \textbf{Criterios de higiene}: Se usaran 3 etiquetas lingüísticas (impecable, limpio, sucio).
  \item \textbf{Género}: Para filtrar los resultados de las reviews.
  \item \textbf{Criterios adicionales}: Otros criterios para discriminar aseos, como discapacidad, con cambiador de bebes, etc.
\end{itemize}

Los argumentos cualitativos se podrán transformar en numéricos con las siguientes funciones de transferencia:

\begin{figure}[H]
  \centerfloat
  \includegraphics[width=0.75\textwidth]{img/1.png}
  \caption{Los valores del eje x, en el rango [0-100], modelizan el nivel de urgencia del usuario, donde 0 indica máxima prisa y 100 prisa ninguna.}
  \label{urgencia}
\end{figure}

\begin{figure}[H]
  \centerfloat
  \includegraphics[width=0.75\textwidth]{img/2.png}
  \caption{Los valores del eje x, en el rango [0-500], modelizan la distancia máxima (en metros) aceptada por el usuario.}
  \label{distancia}
\end{figure}

\begin{figure}[H]
  \centerfloat
  \includegraphics[width=0.75\textwidth]{img/3.png}
  \caption{Los valores del eje x, en el rango [0-100], modelizan el porcentaje de higiene de un aseo.}
  \label{higiene}
\end{figure}

\subsection{Subsistema central}

A partir del criterio de urgencia podemos elegir un radio de distancia primario y secundario, seleccionando donde la función de transferencia alcanza los valores 1 y 0. De esta forma tendríamos que:

\begin{table}[H]
  \centering
  \begin{tabular}{|l|c|c|}
  \hline
  \textbf{Nivel} & \multicolumn{1}{l|}{\textbf{Radio Primario}} & \multicolumn{1}{l|}{\textbf{Radio Secundario}} \\ \hline
  Inmediato      & 50          & 100           \\ \hline
  Pronto         & 150         & 250           \\ \hline
  Más adelante   & 300         & 400           \\ \hline
  \end{tabular}
\end{table}

% El primer valor se utilizaría para una primera búsqueda y el segundo en caso de que los baños encontrados no cumplieran las restricciones fuertes. 
% Mejor un peso exponencial entonces
% Estos valores se usarían para restringir el espacio de búsqueda

% \vspace{\baselineskip}

Esto permite extraer un rango máximo de distancia variable en función de la cantidad y calidad de los baños obtenidos.

\vspace{\baselineskip}

Seguidamente, se extrae la información de los baños desde la base de datos (valores de higiene, distancia, ocupación) y se aplica un algoritmo de optimización, asignando a cada elemento una posible puntuación de la siguiente forma:

\begin{equation}
  S = h*H \times \frac{e_{1}}{u*T} \times \frac{e_{2}}{O}
\end{equation}

Siendo:
\begin{itemize}
  \item $S$ la puntuación asignada.
  \item $H$ el valor de higiene.
  \item $h$ la importancia de la higiene para el usuario.
  \item $T$ el tiempo estimado en llegar, calculado a partir de la distancia.
  \item $u$ la urgencia indicada.
  \item $O$ el nivel probable de ocupación.
  \item $e_{1}$ y $e_{2}$ valores constantes.
\end{itemize} 

El nivel de ocupación se estimará con un modelo probabilístico teniendo en cuenta la hora del día, el flujo de personas habitual, y la naturaleza del establecimiento. 

El nivel de higiene también se calculará de manera similar, considerando el posible conocimiento ad-hoc que otros usuarios de la aplicación hayan dejado.

\subsection{Subsistema de salida}

Si el resultado es exitoso la aplicación devuelve, de forma ordenada, las posibles localizaciones con la siguiente información:

\begin{itemize}
  \item Nombre.
  \item Información geográfica de la ruta más corta desde la ubicación del usuario hasta el lugar, mostrando la distancia y el tiempo de llegada aproximado.
  \item Probabilidad de estar ocupado.
  \item Nivel de higiene esperado, volviendo a transformar los valores numéricos en etiquetas lingüísticas.
\end{itemize}

% Si por el contrario no hubiera éxito en el cálculo de los locales con las restricciones indicadas, la aplicación ofrecería al usuario recalcular las rutas relajando los posibles criterios.

\begin{figure}[H]
  \centerfloat
  \includegraphics[width=0.4\textwidth]{img/4.png}
  \caption{Mockup de una posible salida de la aplicación.}
  \label{output}
\end{figure}

% Probabilidad de estar ocupado: En base a la cantidad de gente en la zona. Una base de datos adicional (propia o con información introducida por los usuario) podría aportar conocimiento adicional sobre el número de baños, la ubicación (ej: si se encuentra en el bajo de un apartamento es de esperar que aparente haber más gente de la que hay). etc.
% - Nivel de higiene: A partir de las reviews de los usuarios. También se podría hacer un estudio de ciencia de datos recogiendo datos de la ubicación, número de personas, fecha y hora\dots, con el objetivo de predecir el nivel de higiene en ese momento.


% Inicialmente, el sistema solicita al usuario que indique cuánto está dispuesto a desplazarse
% dada su ubicación actual. La base lógica difusa se encarga de convertir esta información
% cualitativa a cuantitativa mediante un proceso de “defuzzicación”.Así, ya esta información se
% utiliza a modo de filtro la API de TripAdvisor [5] para obtener los mejores locales de tapas en
% ese radio.

    % ==============================================================================

    \setlength{\parskip}{1em}
    \newpage
    % \nocite{*}
    % \bibliography{bibliografia}
  	% \bibliographystyle{plain}
\end{document}